{% extends "base.html" %}

{% block js %}
    <script src="../static/js/signup.js" defer></script>
{% endblock %}

{% block loginlink %}
<u>Login</u>
{% endblock %}

{% block main %}
    <!--
    <form id="signupForm">
        <div class="mdl-textfield mdl-js-textfield">
            <label class="mdl-textfield__label" for="loginname" id="loginLabel">Name...</label>
            <input class="mdl-textfield__input" type="text" id="loginname" maxlength="512"
                   pattern="\w+" autofocus required>
        </div>
        <div class="mdl-textfield mdl-js-textfield">
            <label class="mdl-textfield__label" for="loginpswd" id="pswdLabel">Password...</label>
            <input class="mdl-textfield__input" type="password" id="loginpswd" maxlength="512" required>
        </div>
        <div class="mdl-textfield mdl-js-textfield">
            <label class="mdl-textfield__label" for="loginpswdConfirm" id="pswdLabelConfirm">Confirm...</label>
            <input class="mdl-textfield__input" type="password" id="loginpswdConfirm" maxlength="512" required>
        </div>
        <input type="submit" value="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored"
               id="loginSubmitButton">
    </form>
    -->

    <form id="signupForm" method="post">
        <div class="mdl-textfield mdl-js-textfield">
            {{ form.loginname.label(class="mdl-textfield__label") }}
            {{ form.loginname(autofocus=true, class="mdl-textfield__input") }}
            {% if form.loginname.errors %}
                <ul class="errors">{% for error in form.loginname.errors %}<li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        <div class="mdl-textfield mdl-js-textfield">
            {{ form.loginpswd.label(class="mdl-textfield__label") }}
            {{ form.loginpswd(class="mdl-textfield__input") }}
            {% if form.loginpswd.errors %}
                <ul class="errors">{% for error in form.loginpswd.errors %}<li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        <div class="mdl-textfield mdl-js-textfield">
            {{ form.loginpswdConfirm.label(class="mdl-textfield__label") }}
            {{ form.loginpswdConfirm(class="mdl-textfield__input") }}
            {% if form.loginpswdConfirm.errors %}
                <ul class="errors">{% for error in form.loginpswdConfirm.errors %}<li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        {{ form.csrf_token }}
        {{ form.submit(class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored") }}
    </form>

    <p id="feedbackParagraph"></p>


{% with messages = get_flashed_messages() %}
{% if messages %}
    <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
    </div>
    <div class="notification is-danger">
        {{ messages[0] }}. Go to <a href="{{ url_for('login') }}">login page</a>.
    </div>
{% endif %}
{% endwith %}
{% endblock %}

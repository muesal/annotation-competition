{% extends "base.html" %}

{% block css %}
    <link rel="stylesheet" href="../static/css/settings.css">

{% endblock %}

{% block js %}
    <script src="../static/js/settings.js" defer></script>
{% endblock %}

{% block settingsLink %}
    <u>Settings</u>
{% endblock %}

{% block main %}

    <form id="SettingsForm" method="post">
        <div class="mdl-textfield mdl-js-textfield" id="namefield">
            {{ form.name.loginname.label(class="mdl-textfield__label") }}
            {{ form.name.loginname(autofocus=true, class="mdl-textfield__input") }}
            {% if form.name.loginname.errors %}
                <ul class="errors">{% for error in form.name.loginname.errors %}
                    <li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        <div class="mdl-textfield mdl-js-textfield" id="oldpswdfield">

            {{ form.password.loginpswd.label(class="mdl-textfield__label") }}
            {{ form.password.loginpswd(class="mdl-textfield__input") }}
            {% if form.password.loginpswd.errors %}
                <ul class="errors">{% for error in pswd.loginpswd.errors %}
                    <li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>

        <div class="mdl-textfield mdl-js-textfield" id="newpswdfield">
            {{ form.changepassowrd.newpswd.label(class="mdl-textfield__label") }}
            {{ form.changepassowrd.newpswd(class="mdl-textfield__input") }}
            {% if form.changepassowrd.errors %}
                <ul class="errors">{% for error in pswd.newpswd.errors %}
                    <li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        <div class="mdl-textfield mdl-js-textfield" id="confirmnewpswd">
            {{ form.changepassowrd.newpswdConfirm.label(class="mdl-textfield__label") }}
            {{ form.changepassowrd.newpswdConfirm(class="mdl-textfield__input") }}
            {% if form.changepassowrd.newpswdConfirm.errors %}
                <ul class="errors">{% for error in form.newpswdConfirm.errors %}
                    <li>{{ error }}</li>{% endfor %}</ul>
            {% endif %}
        </div>
        {{ form.csrf_token }}
        {{ form.changepassowrd.password(class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored") }}

        {{ form.name.nameButton(class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored") }}

        {{ form.delete.delete(class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent") }}

    </form>

    <p id="feedbackParagraph"></p>


    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div id="demo-toast-example" class="mdl-js-snackbar mdl-snackbar">
                <div class="mdl-snackbar__text"></div>
                <button class="mdl-snackbar__action" type="button"></button>
            </div>
            <div class="notification is-danger">
                {{ messages[0] }}. Go to <a href="{{ url_for('login') }}">login page</a>.
            </div>
        {% endif %}
    {% endwith %}
{% endblock %}
